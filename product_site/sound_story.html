<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SoundStory Forum | Discuss Music, Share Playlists & Gear Tips</title>
    <meta
      name="description"
      content="Join the SoundStory music forum to talk about your favorite albums, share playlists, explore mixing gear, and connect with other passionate music fans."
    />
    
    <link rel="stylesheet" href="css/stylesheet.css" />

  </head>

  <body>

    <div class="container">
        <header class="header" role="banner">
            <div class="header-logo" aria-label="SoundStory logo">SoundStory</div>
            <nav class="header-nav" aria-label="Main navigation">
                <a href="music_forum.html" tabindex="0">Home</a>
                <a href="sound_story.html" class="active" aria-current="page" tabindex="0">Forums</a>
                <a href="about.html" >About</a>
            </nav>
        </header>

      <div class="content">
        <!-- Forum Topics Section -->
        <section class="section">
          <h2>Recent Discussions</h2>
          <table class="forum-table">
            <thead>
              <tr>
                <th>Topic</th>
                <th>Category</th>
                <th>Started By</th>
                <th>Replies</th>
              </tr>
            </thead>
            <tbody id="forum-table-body">
              <!-- Posts will be inserted here -->
            </tbody>
          </table>
        </section>

        <!-- New Post Form -->
        <section class="section">
          <h2>Start a New Discussion</h2>
          <div class="form-section">
            <form id="post-form">
              <div class="form-group">
                <label for="username">Your Name:</label>
                <input type="text" id="username" name="username" required maxlength="20" />
              </div>

              <div class="form-group">
                <label for="topic">Topic Title:</label>
                <input type="text" id="topic" name="topic" required maxlength="50" />
              </div>

              <div class="form-group">
                <label>Category:</label>
                <div class="radio-group">
                  <label>
                    <input type="radio" name="category" value="General" checked />
                    General
                  </label>
                  <label>
                    <input type="radio" name="category" value="Gear" />
                    Gear
                  </label>
                  <label>
                    <input type="radio" name="category" value="Music" />
                    Music
                  </label>
                </div>
              </div>

              <div class="form-group">
                <div class="checkbox-group">
                  <input type="checkbox" id="notify" name="notify" value="yes" />
                  <label for="notify">Notify me of replies</label>
                </div>
              </div>

              <div class="form-group">
                <label for="message">Message:</label>
                <textarea id="message" name="message" rows="5" required></textarea>
              </div>

              <button type="submit" class="submit-btn">Post Discussion</button>
            </form>
          </div>
        </section>
      </div>
    </div>

    <!-- Modal -->
    <div id="post-modal" class="modal">
      <div class="modal-content">
        <span class="close-btn" id="close-modal">&times;</span>
        <div class="modal-header">
          <h2 id="modal-title"></h2>
        </div>
        <div class="modal-meta">
          <span><strong>Posted by:</strong> <span id="modal-user"></span></span>
          <span id="modal-category"></span>
        </div>
        <div class="modal-message" id="modal-message"></div>
      </div>
    </div>

    <script>
      // Data structure for forum posts
      const forumPosts = [
        {
          id: 1,
          topic: "Favorite Album of 2024",
          username: "musicfan22",
          category: "Music",
          replies: 15,
          message: "What's everyone's favorite album from this year? I've been really into the new releases from indie artists. Share your top picks!"
        },
        {
          id: 2,
          topic: "Best Headphones for Mixing",
          username: "soundguru",
          category: "Gear",
          replies: 8,
          message: "Looking for recommendations on professional headphones for mixing. What do you all use in your home studios?"
        },
        {
          id: 3,
          topic: "Share Your Playlist!",
          username: "djangel",
          category: "General",
          replies: 12,
          message: "Drop your favorite playlists here! I'm always looking for new music to discover. All genres welcome!"
        }
      ];

      let nextId = 4;

      // Render posts to table
      function renderPosts() {
        const tbody = document.getElementById('forum-table-body');
        tbody.innerHTML = '';
        
        forumPosts.forEach(post => {
          const row = tbody.insertRow();
          row.onclick = () => openModal(post.id);
          
          const badgeClass = `badge badge-${post.category.toLowerCase()}`;
          
          row.innerHTML = `
            <td><span class="topic-title">${post.topic}</span></td>
            <td><span class="${badgeClass}">${post.category}</span></td>
            <td>${post.username}</td>
            <td><span class="replies-count">${post.replies}</span></td>
          `;
        });
      }

      // Open modal with post details
      function openModal(postId) {
        const post = forumPosts.find(p => p.id === postId);
        if (!post) return;
        
        document.getElementById('modal-title').textContent = post.topic;
        document.getElementById('modal-user').textContent = post.username;
        document.getElementById('modal-category').innerHTML = `<span class="badge badge-${post.category.toLowerCase()}">${post.category}</span>`;
        document.getElementById('modal-message').textContent = post.message;
        document.getElementById('post-modal').classList.add('active');
      }

      // Close modal
      function closeModal() {
        document.getElementById('post-modal').classList.remove('active');
      }

      // Handle form submission
      document.getElementById('post-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const newPost = {
          id: nextId++,
          topic: document.getElementById('topic').value,
          username: document.getElementById('username').value,
          category: document.querySelector('input[name="category"]:checked').value,
          replies: 0,
          message: document.getElementById('message').value
        };
        
        forumPosts.unshift(newPost); // Add to beginning of array
        renderPosts();
        
        // Reset form
        this.reset();
        
        // Show success feedback
        alert('Your discussion has been posted!');
      });

      // Event listeners
      document.getElementById('close-modal').addEventListener('click', closeModal);
      document.getElementById('post-modal').addEventListener('click', function(e) {
        if (e.target === this) closeModal();
      });

      // Initial render
      renderPosts();
    </script>
  </body>
</html>